(this.webpackJsonpdatapub=this.webpackJsonpdatapub||[]).push([[0],{185:function(e,t){},319:function(e){e.exports=JSON.parse('[{"value":"utf_8","label":"UTF-8"},{"value":"iso_8859_1","label":"ISO-8859-1"},{"value":"windows_1251","label":"Windows-1251"},{"value":"windows_1252","label":"Windows-1252"},{"value":"shift_jis","label":"Shift JIS"},{"value":"gb2312","label":"GB2312"},{"value":"euc_kr","label":"EUC-KR"},{"value":"iso_8859_2","label":"ISO-8859-2"},{"value":"windows_1250","label":"Windows-1250"},{"value":"euc_jp","label":"EUC-JP"},{"value":"gbk","label":"GBK"},{"value":"big5","label":"Big5"},{"value":"iso_8859_15","label":"ISO-8859-15"},{"value":"windows_1256","label":"Windows-1256"},{"value":"iso_8859_9","label":"ISO-8859-9"}]')},321:function(e){e.exports=JSON.parse('{"type":["string","number","integer","boolean","object","array","date","time","datetime","year","yearmonth","duration","geopoint","geojson","any"]}')},322:function(e,t,a){e.exports=a(705)},373:function(e,t){},375:function(e,t){},401:function(e,t){},403:function(e,t){},404:function(e,t){},426:function(e,t){},428:function(e,t){},526:function(e,t,a){var n={"./geojson.json":239,"./table-schema.json":527,"./topojson.json":240};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=526},586:function(e,t){},588:function(e,t){},616:function(e,t){},617:function(e,t){},622:function(e,t){},624:function(e,t){},648:function(e,t){},674:function(e,t,a){},676:function(e,t,a){},695:function(e,t){},698:function(e,t,a){},699:function(e,t,a){},700:function(e,t,a){e.exports=a.p+"static/media/computing-cloud.7bf30162.svg"},701:function(e,t,a){},702:function(e,t,a){},703:function(e,t,a){},704:function(e,t,a){},705:function(e,t,a){"use strict";a.r(t),a.d(t,"ResourceEditor",(function(){return G}));var n=a(35),r=a(0),o=a.n(r),l=a(155),c=a.n(l),s=a(8),i=a(2),u=a.n(i),p=a(23),d=a(92),m=a(93),f=a(94),h=a(97),b=a(96),g=a(317),v=a(154),E=a.n(v),x=a(318),S=(a(674),a(319)),O=a(95),w=[{label:"Access Restriction",name:"restricted",input_type:"select",values:['{"level": "public"}','{"level": "private"}'],options:["Public","Private"]}],y=function(e){var t=e.metadata,a=e.handleChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"metadata-name"},t.path),o.a.createElement("div",{className:"metadata-form"},o.a.createElement("div",{className:"metadata-input"},o.a.createElement("label",{className:"metadata-label",htmlFor:"title"},"Title:"),o.a.createElement("input",{className:"metadata-input__input",type:"text",name:"title",id:"title",value:t.title||t.name,onChange:a})),o.a.createElement("div",{className:"metadata-input"},o.a.createElement("label",{className:"metadata-label",htmlFor:"description"},"Description:"),o.a.createElement("input",{className:"metadata-input__input",type:"text",name:"description",id:"description",value:t.description||"",onChange:a})),o.a.createElement("div",{className:"metadata-input"},o.a.createElement("label",{className:"metadata-label",htmlFor:"encoding"},"Encoding:"),o.a.createElement("select",{className:"metadata-input__input",name:"encoding",id:"encoding",value:t.encoding||"",onChange:a,required:!0},o.a.createElement("option",{value:"",disabled:!0},"Select..."),S.map((function(e){return o.a.createElement("option",{key:"format-".concat(e.value),value:e.value},e.label)})))),o.a.createElement("div",{className:"metadata-input"},o.a.createElement("label",{className:"metadata-label",htmlFor:"format"},"Format:"),o.a.createElement("select",{className:"metadata-input__input",name:"format",id:"format",value:(t.format||"").toLowerCase(),onChange:a,required:!0},o.a.createElement("option",{value:"",disabled:!0},"Select..."),O.map((function(e){return o.a.createElement("option",{key:"format-".concat(e[0]),value:e[0].toLowerCase()},e[0])})))),w&&w.map((function(e){return o.a.createElement("div",{key:"metadata-custom-".concat(e.name),className:"metadata-input"},o.a.createElement("label",{className:"metadata-label",htmlFor:"format"},e.label,":"),o.a.createElement("select",{className:"metadata-input__input",name:e.name,id:e.name,value:t[e.name]||"",onChange:a,required:!0},o.a.createElement("option",{value:"",disabled:!0},"Select..."),e.options.map((function(t,a){return o.a.createElement("option",{key:"".concat(e.name,"-").concat(a),value:e.values[a]},t)}))))}))))},F=a(157),N=a(320),M=a(321),j=(a(676),function(e){var t=Object(r.useState)(e.schema),a=Object(n.a)(t,2),l=a[0],c=a[1],i=o.a.useMemo((function(){return Object(F.a)(e.data)}),[l]),u=l.fields.map((function(e,t){return{Header:e.name?e.name:"column_".concat(t+1),accessor:e.name?e.name:"column_".concat(t+1)}})),p=o.a.useMemo((function(){return Object(F.a)(u)}),[l]),d=Object(N.useTable)({columns:p,data:i}),m=d.getTableProps,f=d.getTableBodyProps,h=d.headerGroups,b=d.rows,g=d.prepareRow,v=function(e,t,a){var n=Object(s.a)({},l);n.fields[a][t]=e.target.value,c(n)};Object(r.useEffect)((function(){c(e.schema)}),[e.schema]);var E=function(e){return"type"===e?l.fields.map((function(t,a){return o.a.createElement("td",{key:"schema-type-field-".concat(e,"-").concat(a)},o.a.createElement("select",{className:"table-tbody-select",value:t[e]||"",onChange:function(t){return v(t,e,a)}},M.type.map((function(e,t){return o.a.createElement("option",{key:"schema-type-field-option-".concat(e,"-").concat(t),value:e},e)}))))})):l.fields.map((function(t,a){return o.a.createElement("td",{key:"schema-field-".concat(e,"-").concat(a)},o.a.createElement("input",{className:"table-tbody-input",type:"text",value:t[e],onChange:function(t){return v(t,e,a)}}))}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"table-container"},o.a.createElement("table",{className:"table-schema-help"},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"table-tbody-help-tr"},o.a.createElement("td",{className:"table-tbody-help-td-empty"})),o.a.createElement("tr",{className:"table-tbody-help-tr"},o.a.createElement("td",{className:"table-tbody-help-td"},"Title")),o.a.createElement("tr",{className:"table-tbody-help-tr"},o.a.createElement("td",{className:"table-tbody-help-td"},"Description")),o.a.createElement("tr",{className:"table-tbody-help-tr"},o.a.createElement("td",{className:"table-tbody-help-td"},"Type")),o.a.createElement("tr",{className:"table-tbody-help-tr"},o.a.createElement("td",{className:"table-tbody-help-td"},"Format")))),o.a.createElement("div",{className:"table-schema-info_container"},o.a.createElement("table",Object.assign({className:"table-schema-info_table"},m()),o.a.createElement("thead",null,h.map((function(e){return o.a.createElement("tr",Object.assign({className:"table-thead-tr"},e.getHeaderGroupProps()),e.headers.map((function(e){return o.a.createElement("th",Object.assign({className:"table-thead-th"},e.getHeaderProps()),e.render("Header"))})))}))),o.a.createElement("tbody",f(),o.a.createElement("tr",{className:"table-tbody-tr-help"},E("title")),o.a.createElement("tr",{className:"table-tbody-tr-help"},E("description")),o.a.createElement("tr",null,E("type")),o.a.createElement("tr",null,E("format")),b.map((function(e){return g(e),o.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return o.a.createElement("td",Object.assign({},e.getCellProps(),{className:"table-tbody-td"}),e.render("Cell"))})))})))))))}),k=a(156),_=(a(135),a(698),function(e){var t=Object(r.useState)(0),a=Object(n.a)(t,2),l=a[0],c=a[1],s=Object(r.useRef)(null),i=e.size,u=e.progress,p=e.strokeWidth,d=e.circleOneStroke,m=e.circleTwoStroke,f=e.timeRemaining,h=i/2,b=i/2-p/2,g=2*Math.PI*b;return Object(r.useEffect)((function(){c((100-u)/100*g),s.current.style="transition: stroke-dashoffset 850ms ease-in-out"}),[c,u,g,l]),o.a.createElement(o.a.Fragment,null,o.a.createElement("svg",{className:"svg",width:i,height:i},o.a.createElement("circle",{className:"svg-circle-bg",stroke:d,cx:h,cy:h,r:b,strokeWidth:p}),o.a.createElement("circle",{className:"svg-circle",ref:s,stroke:m,cx:h,cy:h,r:b,strokeWidth:p,strokeDasharray:g,strokeDashoffset:l}),o.a.createElement("text",{x:"".concat(h),y:"".concat(h+2),className:"svg-circle-text"},u,"%")),f>0&&o.a.createElement("span",{className:"time-remaining"},f>60?"".concat(Math.floor(f/60)," minute").concat(Math.floor(f/60)>1?"s":""):"".concat(Math.floor(f)," second").concat(f>1?"s":"")," left"))}),C=function(e){return/[.]/.exec(e)?/[^.]+$/.exec(e)[0]:void 0},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===e)return"0 Bytes";var a=1e3,n=t<0?0:t,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,o)).toFixed(n))+" "+r[o]},I=function(e){try{var t=new URL(e),a=t.pathname,n=C(a);return n&&["csv","json","xml","pdf","xlsx","xls","doc","docx","txt","zip","rar","jpg","jpeg","png","gif","svg","mp4","mp3","avi","mov","wmv","flv","mkv","webm","wav","flac","aac","ogg","m4a","wma","ppt","pptx","geojson","kml","kmz","shp","tsv","rdf","owl","n3","ttl"].includes(n.toLowerCase())?n.toLowerCase():("/"===a||""===a||!n||a.includes("/page/")||a.includes("/post/")||a.includes("/article/")||t.search||t.hash,"website")}catch(r){return"website"}},R=function(e){var t=C(e);if(!t)return!1;return["csv","tsv","json","xlsx","xls","ods","geojson"].includes(t.toLowerCase())},T=function(e){var t=C(e);return t?t.toLowerCase():"unknown"},A=function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.arrayBuffer();case 3:return a=e.sent,e.next=6,crypto.subtle.digest("SHA-256",a);case 6:return n=e.sent,r=Array.from(new Uint8Array(n)),o=r.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",o);case 12:return e.prev=12,e.t0=e.catch(0),console.warn("Failed to generate file hash:",e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),L=(a(699),a(700),function(e){var t=e.onChangeHandler;return o.a.createElement("div",{className:"upload-area__drop"},o.a.createElement("input",{className:"upload-area__drop__input",type:"file",name:"file",onChange:t}),o.a.createElement("img",{className:"upload-area__drop__icon",src:"https://www.shareicon.net/data/256x256/2015/09/05/96087_cloud_512x512.png",alt:"upload-icon"}),o.a.createElement("span",{className:"upload-area__drop__text"},"Drag and drop your files",o.a.createElement("br",null),"or ",o.a.createElement("br",null),"click to select"))}),U=(a(701),function(e){var t=e.onChangeUrl;return o.a.createElement("div",{className:"upload-area__url"},o.a.createElement("label",{className:"upload-area__url__label",htmlFor:"input-url"},"URL:"),o.a.createElement("input",{className:"upload-area__url__input",id:"input-url",type:"url",name:"input-url",onBlur:t,onKeyDown:function(e){return function(e){13===e.keyCode&&e.target.blur()}(e)},placeholder:"https://www.data.com/sample.csv"}))}),D=(a(702),function(e){var t=e.onChangeUrl,a=e.onChangeHandler,l=e.resetUploadState,c=Object(r.useState)(!1),s=Object(n.a)(c,2),i=s[0],u=s[1];return o.a.createElement("div",{className:"upload-choose"},i?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"upload-option-header"},o.a.createElement("button",{className:"back-btn",onClick:function(){u(!1),l&&l()},type:"button"},"\u2190 Volver"),o.a.createElement("span",{className:"upload-option-title"},"file"===i?"Subir archivo":"Enlazar archivo online")),"file"===i&&o.a.createElement(L,{onChangeHandler:a}),"url"===i&&o.a.createElement(U,{onChangeUrl:t})):o.a.createElement("div",null,o.a.createElement("button",{className:"choose-btn",onClick:function(){return u("file")}},"Choose a file to Upload "),o.a.createElement("p",{className:"choose-text"},"OR"),o.a.createElement("button",{className:"choose-btn",onClick:function(){return u("url")}},"Link a file already online")))}),z=(a(703),function(e){if(!e||"object"!==typeof e)return console.error("createFileWithHashAlternative: Invalid file object provided"),null;var t=Object.create(Object.getPrototypeOf(e));return Object.getOwnPropertyNames(e).forEach((function(a){var n=Object.getOwnPropertyDescriptor(e,a);n&&Object.defineProperty(t,a,n)})),t.hash=function(){var t=Object(p.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),console.error("Error generating file hash:",t.t0),t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),t}),W=function(e){return e&&"object"===typeof e?new Proxy(e,{get:function(t,a,n){if("hash"===a)return function(){var t=Object(p.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),console.error("Error generating file hash in proxy:",t.t0),t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();if("type"===a)return Reflect.get(t,a,t)||"application/octet-stream";if("name"===a)return Reflect.get(t,a,t)||"unknown-file";if("size"===a){var r=Reflect.get(t,a,t);return"number"===typeof r?r:0}var o=Reflect.get(t,a,t);return"function"===typeof o?o.bind(t):o},has:function(e,t){return"hash"===t||Reflect.has(e,t)},ownKeys:function(e){var t=Reflect.ownKeys(e);return t.includes("hash")||t.push("hash"),t},getOwnPropertyDescriptor:function(e,t){return"hash"===t?{enumerable:!0,configurable:!0,writable:!1}:Reflect.getOwnPropertyDescriptor(e,t)},set:function(e,t,a,n){return"hash"!==t&&Reflect.set(e,t,a,e)}}):(console.error("createFileWithHash: Invalid file object provided"),null)},X=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).resetUploadState=function(){n.setState({selectedFile:null,selectedUrl:"",fileSize:0,formattedSize:"0 KB",start:"",loaded:0,success:!1,error:!1,fileExists:!1,loading:!1,timeRemaining:0,uploadType:"",detectedFormat:"",manualFormat:""}),n.props.metadataHandler({}),n.props.handleUploadStatus({loading:!1,success:!1,error:!1})},n.onChangeHandler=function(){var e=Object(p.a)(u.a.mark((function e(t){var a,r,o,l,c,i,p,d,m,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.state,r=a.formattedSize,o=a.selectedFile,!(t.target.files.length>0)){e.next=44;break}if(o=t.target.files[0],l=R(o.name),c=T(o.name),i={name:o.name,title:o.name,format:c,size:o.size},!l){e.next=37;break}return e.prev=7,p=k.open(o),e.prev=9,e.next=12,p.addSchema();case 12:i=Object(s.a)(Object(s.a)({},p.descriptor),{},{format:c}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),console.warn("Schema parsing failed, continuing without schema:",e.t0),i=Object(s.a)(Object(s.a)({},i),{},{schema:{fields:[]}});case 19:return r=P(p.size),e.next=22,p.hash("sha256");case 22:d=e.sent,i.hash=d,e.next=35;break;case 26:return e.prev=26,e.t1=e.catch(7),console.warn("Frictionless.js processing failed, using basic metadata:",e.t1),r=P(o.size),i=Object(s.a)(Object(s.a)({},i),{},{schema:{fields:[]}}),e.next=33,A(o);case 33:(m=e.sent)&&(i.hash=m);case 35:e.next=43;break;case 37:return r=P(o.size),i=Object(s.a)(Object(s.a)({},i),{},{schema:{fields:[]}}),e.next=41,A(o);case 41:(f=e.sent)&&(i.hash=f);case 43:n.props.metadataHandler(i);case 44:return n.setState({selectedFile:o,selectedUrl:"",loaded:0,success:!1,fileExists:!1,error:!1,formattedSize:r,uploadType:"file"}),e.next=47,n.onClickHandler();case 47:case"end":return e.stop()}}),e,null,[[7,26],[9,15]])})));return function(t){return e.apply(this,arguments)}}(),n.onChangeUrl=function(){var e=Object(p.a)(u.a.mark((function e(t){var a,r,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value.trim()){e.next=5;break}return n.setState({selectedUrl:"",success:!1,error:!1,uploadType:"",detectedFormat:"",manualFormat:""}),n.props.handleUploadStatus({loading:!1,success:!1,error:!1}),e.abrupt("return");case 5:e.prev=5,new URL(a),e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(5),console.error("Invalid URL:",e.t0),n.setState({selectedUrl:a,selectedFile:null,loading:!1,success:!1,error:!0,uploadType:"url",detectedFormat:"",manualFormat:""}),n.props.handleUploadStatus({loading:!1,success:!1,error:!0}),e.abrupt("return");case 15:r=I(a),n.setState({selectedUrl:a,selectedFile:null,loading:!1,success:!0,error:!1,uploadType:"url",formattedSize:"URL Resource",fileSize:0,detectedFormat:r,manualFormat:r}),n.props.handleUploadStatus({loading:!1,success:!0,error:!1}),o=a.split("/").pop()||"resource-from-url",l={url:a,name:o,title:o,format:r},n.props.metadataHandler(l);case 21:case"end":return e.stop()}}),e,null,[[5,9]])})));return function(t){return e.apply(this,arguments)}}(),n.onFormatChange=function(e){var t=e.target.value;n.setState({manualFormat:t});var a=n.state.selectedUrl,r=a.split("/").pop()||"resource-from-url",o={url:a,name:r,title:r,format:t};n.props.metadataHandler(o)},n.onUploadProgress=function(e){n.onTimeRemaining(e.loaded),n.setState({loaded:e.loaded/e.total*100})},n.onTimeRemaining=function(e){var t=e/(((new Date).getTime()-n.state.start)/1e3)/1024,a=(n.state.fileSize-e)/t;n.setState({timeRemaining:a/1e3})},n.onClickHandler=Object(p.a)(u.a.mark((function e(){var t,a,r,o,l,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(new Date).getTime(),a=n.state.selectedFile,r=n.props.client,a){e.next=6;break}return console.error("No file selected"),e.abrupt("return");case 6:if(console.log("Selected file:",a),console.log("File type:",a.type),console.log("File name:",a.name),console.log("File size:",a.size),o=R(a.name),c=a.size,!o){e.next=33;break}e.prev=13,l=k.open(a),c=l.size,console.log("Using frictionless.js resource:",l),e.next=31;break;case 19:if(e.prev=19,e.t0=e.catch(13),console.warn("Frictionless.js failed, creating proxy with hash:",e.t0),l=W(a)){e.next=28;break}return console.error("Failed to create proxy for tabular file"),n.setState({error:!0,loading:!1}),n.props.handleUploadStatus({loading:!1,success:!1,error:!0}),e.abrupt("return");case 28:console.log("Created proxy for failed tabular file:",l),console.log("Proxy type:",l.type),console.log("Proxy has hash:","hash"in l);case 31:e.next=51;break;case 33:if(console.log("Creating proxy for non-tabular file"),l=W(a)){e.next=46;break}if(console.error("Proxy creation failed, trying alternative approach"),l=z(a)){e.next=43;break}return console.error("Failed to create file wrapper for non-tabular file"),n.setState({error:!0,loading:!1}),n.props.handleUploadStatus({loading:!1,success:!1,error:!0}),e.abrupt("return");case 43:console.log("Created alternative file wrapper:",l),e.next=47;break;case 46:console.log("Created proxy for non-tabular file:",l);case 47:console.log("Resource type:",l.type),console.log("Resource size:",l.size),console.log("Resource has hash:","hash"in l),console.log("Resource constructor:",l.constructor.name);case 51:if(a&&a.type){e.next=56;break}return console.error("Selected file is invalid or missing type"),n.setState({error:!0,loading:!1}),n.props.handleUploadStatus({loading:!1,success:!1,error:!0}),e.abrupt("return");case 56:console.log("Final upload file:",a),console.log("File type:",a.type),console.log("File size:",a.size),console.log("File constructor:",a.constructor.name),console.log("File instanceof File:",a instanceof File),n.setState({fileSize:c,start:t,loading:!0}),n.props.handleUploadStatus({loading:!0,error:!1,success:!1}),r.pushBlob(a,n.onUploadProgress).then((function(e){console.log("Upload successful:",e),n.setState({success:!0,loading:!1,fileExists:!e,loaded:100}),n.props.handleUploadStatus({loading:!1,success:!0})})).catch((function(e){console.error("Upload failed with error: "+e),console.error("Error details:",e),n.setState({error:!0,loading:!1}),n.props.handleUploadStatus({loading:!1,success:!1,error:!0})}));case 64:case"end":return e.stop()}}),e,null,[[13,19]])}))),n.state={datasetId:e.datasetId,selectedFile:null,selectedUrl:"",fileSize:0,formattedSize:"0 KB",start:"",loaded:0,success:!1,error:!1,fileExists:!1,loading:!1,timeRemaining:0,uploadType:"",detectedFormat:"",manualFormat:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.success,a=e.fileExists,n=e.error,r=e.timeRemaining,l=e.selectedFile,c=e.selectedUrl,s=e.formattedSize,i=e.uploadType,u=e.loading,p=e.detectedFormat,d=e.manualFormat;return o.a.createElement("div",{className:"upload-area"},o.a.createElement(D,{onChangeHandler:this.onChangeHandler,onChangeUrl:this.onChangeUrl,resetUploadState:this.resetUploadState}),o.a.createElement("div",{className:"upload-area__info"},(l||c)&&o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{className:"upload-list"},o.a.createElement("li",{className:"list-item"},o.a.createElement("div",{className:"upload-list-item"},o.a.createElement("div",null,o.a.createElement("p",{className:"upload-file-name"},"file"===i?l.name:c),o.a.createElement("p",{className:"upload-file-size"},s),"url"===i&&o.a.createElement("div",{className:"format-selector"},o.a.createElement("label",{htmlFor:"format-select",className:"format-label"},"Resource Type:"),o.a.createElement("select",{id:"format-select",className:"format-select",value:d,onChange:this.onFormatChange},O.map((function(e){return o.a.createElement("option",{key:"format-".concat(e[0]),value:e[0].toLowerCase()},e[0]," - ",e[1])}))),p&&o.a.createElement("p",{className:"detected-format"},"Auto-detected: ",p.toUpperCase()))),o.a.createElement("div",null,"file"===i&&o.a.createElement(_,{progress:Math.round(this.state.loaded),size:50,strokeWidth:5,circleOneStroke:"#d9edfe",circleTwoStroke:"#7ea9e1",timeRemaining:r}),"url"===i&&u&&o.a.createElement("div",{className:"url-loading"},"Processing URL..."))))),o.a.createElement("h2",{className:"upload-message"},t&&!a&&!n&&("file"===i?"File uploaded successfully":"URL processed successfully"),a&&"File uploaded successfully",n&&("file"===i?"Upload failed":"URL processing failed")))))}}]),a}(o.a.Component),G=(a(704),function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleChangeMetadata=function(e){var t=e.target,a=t.value,r=t.name,o=n.state.resource;o[r]=a,n.setState({resource:o})},n.handleSubmitMetadata=Object(p.a)(u.a.mark((function e(){var t,a,r,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.resource,r=t.client,e.next=3,n.createResource(a);case 3:return!0,e.next=7,r.action("package_show",{id:n.state.datasetId});case 7:if(o=e.sent,"draft"!=(l=o.result).state){e.next=13;break}return l.state="active",e.next=13,r.action("package_update",l);case 13:return e.abrupt("return",window.location.href="/dataset/".concat(n.state.datasetId));case 14:case"end":return e.stop()}}),e)}))),n.createResource=function(){var e=Object(p.a)(u.a.mark((function e(t){var a,r,o,l,c,i,p,d,m,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.state.client,r=n.props.config,o=r.organizationId,l=r.datasetId,c=r.resourceId,i=E.a.resourceFrictionlessToCkan(t),p={},i.sample&&(p=Object(s.a)({},i.sample),delete i.sample),d=i.bq_table_name?i.bq_table_name:Object(x.v4)(),m=t.url&&!t.hash,f=Object(s.a)(Object(s.a)({},i),{},{package_id:n.state.datasetId,name:t.name||t.title,bq_table_name:(u=d,u.replace(/-/g,""))}),m||(f.sample=p),f=m?Object(s.a)(Object(s.a)({},f),{},{url:t.url,url_type:"url"}):Object(s.a)(Object(s.a)({},f),{},{sha256:t.hash,size:t.size,lfs_prefix:"".concat(o,"/").concat(l),url:t.name,url_type:"upload"}),!c){e.next=16;break}return f=Object(s.a)(Object(s.a)({},f),{},{id:c}),e.next=15,a.action("resource_update",f);case 15:return e.abrupt("return",window.location.href="/dataset/".concat(l));case 16:return e.next=18,a.action("resource_create",f).then((function(e){n.onChangeResourceId(e.result.id)}));case 18:case"end":return e.stop()}var u}),e)})));return function(t){return e.apply(this,arguments)}}(),n.deleteResource=Object(p.a)(u.a.mark((function e(){var t,a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=t.resource,r=t.client,o=t.datasetId,!window.confirm("Are you sure to delete this resource?")){e.next=5;break}return e.next=4,r.action("resource_delete",{id:a.id});case 4:return e.abrupt("return",window.location.href="/dataset/".concat(o));case 5:case"end":return e.stop()}}),e)}))),n.handleUploadStatus=function(e){var t=n.state.ui,a=Object(s.a)(Object(s.a)({},t),{},{success:e.success,error:e.error,loading:e.loading});n.setState({ui:a})},n.onChangeResourceId=function(e){n.setState({resourceId:e})},n.state={datasetId:n.props.config.datasetId,resourceId:"",resource:n.props.resource||{},ui:{fileOrLink:"",uploadComplete:void 0,success:!1,error:!1,loading:!1},client:null,isResourceEdit:!1},n.metadataHandler=n.metadataHandler.bind(Object(f.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,n,r,o,l,c,s,i,p,d,m,f,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.config,a=t.authToken,n=t.api,r=t.lfs,o=t.organizationId,l=t.datasetId,c=t.resourceId,s=new g.Client("".concat(a),"".concat(o),"".concat(l),"".concat(n),"".concat(r)),!c){e.next=17;break}return e.next=6,s.action("resource_show",{id:c});case 6:return i=e.sent,e.next=9,s.action("resource_schema_show",{id:c});case 9:return p=e.sent,e.next=12,s.action("resource_sample_show",{id:c});case 12:d=e.sent,m=i.result,f=[];try{for(h in d.result)f.push(d.result[h]);m.sample=f,m.schema=p.result}catch(u){console.error(u),m.schema={fields:[]},m.sample=[]}return e.abrupt("return",this.setState({client:s,resourceId:c,resource:m,isResourceEdit:!0}));case 17:this.setState({client:s});case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"metadataHandler",value:function(e){this.setState({resource:e})}},{key:"render",value:function(){var e=this,t=this.state.ui,a=(t.loading,t.success);return o.a.createElement("div",{className:"App"},o.a.createElement("form",{className:"upload-wrapper",onSubmit:function(t){return t.preventDefault(),e.state.isResourceEdit?e.createResource(e.state.resource):e.handleSubmitMetadata()}},o.a.createElement("div",{className:"upload-header"},o.a.createElement("h2",{className:"upload-header__title"},"Resource Editor")),o.a.createElement(X,{client:this.state.client,resource:this.state.resource,metadataHandler:this.metadataHandler,datasetId:this.state.datasetId,handleUploadStatus:this.handleUploadStatus,onChangeResourceId:this.onChangeResourceId}),o.a.createElement("div",{className:"upload-edit-area"},o.a.createElement(y,{metadata:this.state.resource,handleChange:this.handleChangeMetadata}),this.state.resource.schema&&o.a.createElement(j,{schema:this.state.resource.schema,data:this.state.resource.sample||[]}),this.state.isResourceEdit?o.a.createElement("div",{className:"resource-edit-actions"},o.a.createElement("button",{type:"button",className:"btn btn-delete",onClick:this.deleteResource},"Delete"),o.a.createElement("button",{className:"btn"},"Update")):o.a.createElement("button",{disabled:!a,className:"btn"},"Save and Publish"))))}}]),a}(o.a.Component));G.defaultProps={config:{authToken:"be270cae-1c77-4853-b8c1-30b6cf5e9878",api:"http://localhost:5000",lfs:"http://localhost:5001",organizationId:"myorg",datasetId:"data-test-2"}};var B=G;var H=document.getElementById("ResourceEditor");if(H){var V={datasetId:H.getAttribute("data-dataset-id"),api:H.getAttribute("data-api"),lfs:H.getAttribute("data-lfs"),authToken:H.getAttribute("data-auth-token"),organizationId:H.getAttribute("data-organization-id"),resourceId:H.getAttribute("data-resource-id")};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(B,{config:V,resource:H.getAttribute("data-resource")})),H)}},95:function(e){e.exports=JSON.parse('[["PPTX","Powerpoint OOXML Presentation","application/vnd.openxmlformats-officedocument.presentationml.presentation",[]],["EXE","Windows Executable Program","application/x-msdownload",[]],["DOC","Word Document","application/msword",[]],["KML","KML File","application/vnd.google-earth.kml+xml",[]],["XLS","Excel Document","application/vnd.ms-excel",["Excel","application/msexcel","application/x-msexcel","application/x-ms-excel","application/x-excel","application/x-dos_ms_excel","application/xls","application/x-xls"]],["WCS","Web Coverage Service","wcs",[]],["JS","JavaScript","application/x-javascript",[]],["MDB","Access Database","application/x-msaccess",[]],["NetCDF","NetCDF File","application/netcdf",[]],["ArcGIS Map Service","ArcGIS Map Service","ArcGIS Map Service",["arcgis map service"]],["TSV","Tab Separated Values File","text/tab-separated-values",["text/tsv"]],["WFS","Web Feature Service",null,[]],["WMTS","Web Map Tile Service",null,[]],["ArcGIS Online Map","ArcGIS Online Map","ArcGIS Online Map",["web map application"]],["Perl","Perl Script","text/x-perl",[]],["KMZ","KMZ File","application/vnd.google-earth.kmz+xml",["application/vnd.google-earth.kmz"]],["OWL","Web Ontology Language","application/owl+xml",[]],["N3","N3 Triples","application/x-n3",[]],["ZIP","Zip File","application/zip",["zip","http://purl.org/NET/mediatypes/application/zip"]],["GZ","Gzip File","application/gzip",["application/x-gzip"]],["QGIS","QGIS File","application/x-qgis",[]],["ODS","OpenDocument Spreadsheet","application/vnd.oasis.opendocument.spreadsheet",[]],["ODT","OpenDocument Text","application/vnd.oasis.opendocument.text",[]],["JSON","JavaScript Object Notation","application/json",[]],["BMP","Bitmap Image File","image/x-ms-bmp",[]],["HTML","Web Page","text/html",["htm","http://purl.org/net/mediatypes/text/html"]],["RAR","RAR Compressed File","application/rar",[]],["TIFF","TIFF Image File","image/tiff",[]],["ODB","OpenDocument Database","application/vnd.oasis.opendocument.database",[]],["TXT","Text File","text/plain",[]],["DCR","Adobe Shockwave format","application/x-director",[]],["ODF","OpenDocument Math Formula","application/vnd.oasis.opendocument.formula",[]],["ODG","OpenDocument Image","application/vnd.oasis.opendocument.graphics",[]],["XML","XML File","application/xml",["text/xml","http://purl.org/net/mediatypes/application/xml"]],["XLSX","Excel OOXML Spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",[]],["DOCX","Word OOXML Document","application/vnd.openxmlformats-officedocument.wordprocessingml.document",[]],["BIN","Binary Data","application/octet-stream",["bin"]],["XSLT","Extensible Stylesheet Language Transformations","application/xslt+xml",[]],["WMS","Web Mapping Service","WMS",["wms"]],["SVG","SVG vector image","image/svg+xml",["svg"]],["PPT","Powerpoint Presentation","application/vnd.ms-powerpoint",[]],["ODP","OpenDocument Presentation","application/vnd.oasis.opendocument.presentation",[]],["JPEG","JPG Image File","image/jpeg",["jpeg","jpg"]],["SPARQL","SPARQL end-point","application/sparql-results+xml",[]],["GIF","GIF Image File","image/gif",[]],["RDF","RDF","application/rdf+xml",["rdf/xml"]],["E00"," ARC/INFO interchange file format","application/x-e00",[]],["PDF","PDF File","application/pdf",[]],["CSV","Comma Separated Values File","text/csv",["text/comma-separated-values"]],["ODC","OpenDocument Chart","application/vnd.oasis.opendocument.chart",[]],["Atom Feed","Atom Feed","application/atom+xml",[]],["MrSID","MrSID","image/x-mrsid",[]],["ArcGIS Map Preview","ArcGIS Map Preview","ArcGIS Map Preview",["arcgis map preview"]],["XYZ","XYZ Chemical File","chemical/x-xyz",[]],["MOP","MOPAC Input format","chemical/x-mopac-input",[]],["Esri REST","Esri Rest API Endpoint","Esri REST",["arcgis_rest"]],["dBase","dBase Database","application/x-dbf",["dbf"]],["MXD","ESRI ArcGIS project file","application/x-mxd",[]],["TAR","TAR Compressed File","application/x-tar",[]],["PNG","PNG Image File","image/png",[]],["RSS","RSS feed","application/rss+xml",[]],["GeoJSON","Geographic JavaScript Object Notation","application/geo+json",["geojson"]],["SHP","Shapefile",null,["esri shapefile"]],["TORRENT","Torrent","application/x-bittorrent",["bittorrent"]],["ICS","iCalendar","text/calendar",["ifb","iCal"]],["GTFS","General Transit Feed Specification",null,[]],["XLSB","Excel OOXML Spreadsheet - Binary Workbook","application/vnd.ms-excel.sheet.binary.macroEnabled.12",[]],["XLSM","Excel OOXML Spreadsheet - Macro-Enabled","application/vnd.ms-excel.sheet.macroEnabled.12",[]],["XLTM","Excel OOXML Spreadsheet - Macro-Enabled Template","application/vnd.ms-excel.template.macroEnabled.12",[]],["XLAM","Excel OOXML Spreadsheet - Macro-Enabled Add-In","application/vnd.ms-excel.addin.macroEnabled.12",[]],["DOTX","Word OOXML - Template","application/vnd.openxmlformats-officedocument.wordprocessingml.template",[]],["DOCM","Word OOXML - Macro Enabled","application/vnd.ms-word.document.macroEnabled.12",[]],["DOTM","Word OOXML Template - Macro Enabled","application/vnd.ms-word.template.macroEnabled.12",[]],["XLTX","Excel OOXML Spreadsheet - Template","application/vnd.openxmlformats-officedocument.spreadsheetml.template",[]],["POTX","PowerPoint OOXML Presentation - Template","application/vnd.openxmlformats-officedocument.presentationml.template",[]],["PPSX","PowerPoint Open XML - Slide Show","application/vnd.openxmlformats-officedocument.presentationml.slideshow",[]],["PPAM","PowerPoint Open XML - Macro-Enabled Add-In","application/vnd.ms-powerpoint.addin.macroEnabled.12",[]],["PPTM","PowerPoint Open XML - Macro-Enabled","application/vnd.ms-powerpoint.presentation.macroEnabled.12",[]],["POTM","PowerPoint Open XML - Macro-Enabled Template","application/vnd.ms-powerpoint.template.macroEnabled.12",[]],["PPSM","PowerPoint Open XML - Macro-Enabled Slide Show","application/vnd.ms-powerpoint.slideshow.macroEnabled.12",[]],["MP3","MP3 Audio File","audio/mpeg",["audio/mp3"]],["MP4","MP4 Video File","video/mp4",[]],["AVI","AVI Video File","video/x-msvideo",["video/avi"]],["MOV","QuickTime Movie","video/quicktime",[]],["WMV","Windows Media Video","video/x-ms-wmv",[]],["FLV","Flash Video","video/x-flv",[]],["MKV","Matroska Video","video/x-matroska",[]],["WEBM","WebM Video","video/webm",[]],["WAV","WAV Audio File","audio/wav",["audio/wave"]],["FLAC","FLAC Audio File","audio/flac",[]],["AAC","AAC Audio File","audio/aac",[]],["OGG","OGG Audio File","audio/ogg",[]],["M4A","M4A Audio File","audio/mp4",["audio/m4a"]],["WMA","Windows Media Audio","audio/x-ms-wma",[]],["WEBSITE","Website","text/html",["web","site","webpage"]]]')}},[[322,1,2]]]);
//# sourceMappingURL=main.513b55f3.chunk.js.map