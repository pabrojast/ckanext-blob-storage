{"version":3,"sources":["../node_modules/tableschema/lib/profiles sync /^/.//.*/.json$","assets/images/computing-cloud.svg","components/Metadata/index.jsx","components/TableSchema/index.jsx","components/ProgressBar/index.jsx","utils/index.js","components/InputFile/index.jsx","components/InputUrl/index.jsx","components/Choose/index.jsx","components/Upload/index.jsx","App.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","customFields","label","name","input_type","values","options","Metadata","metadata","handleChange","className","path","htmlFor","type","value","title","onChange","description","encoding","required","disabled","encodeData","item","key","format","toLowerCase","formatData","option","index","TableSchema","props","useState","schema","setSchema","data","React","useMemo","columnsSchema","fields","Header","accessor","columns","useTable","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","event","newSchema","target","useEffect","renderEditSchemaField","types","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","row","getRowProps","cells","cell","getCellProps","ProgressBar","offset","setOffset","circleRef","useRef","size","progress","strokeWidth","circleOneStroke","circleTwoStroke","timeRemaining","center","radius","circumference","Math","PI","current","style","width","height","stroke","cx","cy","r","ref","strokeDasharray","strokeDashoffset","x","y","floor","onFormatBytes","bytes","decimals","k","dm","sizes","i","log","parseFloat","pow","toFixed","InputFile","onChangeHandler","src","alt","InputUrl","onChangeUrl","onBlur","onKeyDown","keyCode","blur","handleKeyPress","placeholder","Choose","uploadOption","setUploadOption","onClick","Upload","a","state","formattedSize","selectedFile","files","length","file","addSchema","console","warn","hash","metadataHandler","assign","descriptor","setState","selectedUrl","loaded","success","fileExists","error","uploadType","onClickHandler","url","trim","handleUploadStatus","loading","resource","fileSize","split","pop","onUploadProgress","progressEvent","onTimeRemaining","total","progressLoaded","kbps","Date","getTime","start","client","pushBlob","then","response","catch","datasetId","this","round","Component","ResourceEditor","handleChangeMetadata","resourceCopy","handleSubmitMetadata","createResource","action","datasetMetadata","result","window","location","href","config","organizationId","resourceId","ckanResource","frictionlessCkanMapper","resourceFrictionlessToCkan","sample","bqTableName","bq_table_name","uuidv4","isUrlResource","ckanResourceCopy","package_id","replace","url_type","sha256","lfs_prefix","onChangeResourceId","deleteResource","confirm","status","ui","newUiState","fileOrLink","uploadComplete","undefined","isResourceEdit","bind","authToken","api","lfs","Client","resourceSchema","resourceSample","sampleCopy","property","push","onSubmit","preventDefault","defaultProps","element","document","getElementById","getAttribute","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.02170699.chunk.js","sourcesContent":["var map = {\n\t\"./geojson.json\": 238,\n\t\"./table-schema.json\": 527,\n\t\"./topojson.json\": 239\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 526;","module.exports = __webpack_public_path__ + \"static/media/computing-cloud.7bf30162.svg\";","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./Metadata.css\";\r\nimport encodeData from \"../../db/encode.json\";\r\nimport formatData from \"../../db/resource_formats.json\";\r\n\r\n//TODO: add the custom fields as a props and render it in metadata component\r\nconst customFields = [\r\n  {\r\n    label: \"Access Restriction\",\r\n    name: \"restricted\",\r\n    input_type: \"select\",\r\n    values: ['{\"level\": \"public\"}', '{\"level\": \"private\"}'],\r\n    options: [\"Public\", \"Private\"],\r\n  },\r\n];\r\n\r\nconst Metadata = ({ metadata, handleChange}) => {\r\n  return (\r\n    <>\r\n      <h3 className=\"metadata-name\">{metadata.path}</h3>\r\n      <div className=\"metadata-form\">\r\n        <div className=\"metadata-input\">\r\n          <label className=\"metadata-label\" htmlFor=\"title\">\r\n            Title:\r\n          </label>\r\n          <input\r\n            className=\"metadata-input__input\"\r\n            type=\"text\"\r\n            name=\"title\"\r\n            id=\"title\"\r\n            value={metadata.title || metadata.name}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"metadata-input\">\r\n          <label className=\"metadata-label\" htmlFor=\"description\">\r\n            Description:\r\n          </label>\r\n          <input\r\n            className=\"metadata-input__input\"\r\n            type=\"text\"\r\n            name=\"description\"\r\n            id=\"description\"\r\n            value={metadata.description || \"\"}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"metadata-input\">\r\n          <label className=\"metadata-label\" htmlFor=\"encoding\">\r\n            Encoding:\r\n          </label>\r\n          <select\r\n            className=\"metadata-input__input\"\r\n            name=\"encoding\"\r\n            id=\"encoding\"\r\n            value={metadata.encoding || \"\"}\r\n            onChange={handleChange}\r\n            required\r\n          >\r\n            <option value=\"\" disabled>\r\n              Select...\r\n            </option>\r\n            {encodeData.map((item) => (\r\n              <option key={`format-${item.value}`} value={item.value}>\r\n                {item.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"metadata-input\">\r\n          <label className=\"metadata-label\" htmlFor=\"format\">\r\n            Format:\r\n          </label>\r\n          <select\r\n            className=\"metadata-input__input\"\r\n            name=\"format\"\r\n            id=\"format\"\r\n            value={(metadata.format || \"\").toLowerCase()}\r\n            onChange={handleChange}\r\n            required\r\n          >\r\n            <option value=\"\" disabled>\r\n              Select...\r\n            </option>\r\n            {formatData.map((item) => (\r\n              <option key={`format-${item[0]}`} value={item[0].toLowerCase()}>\r\n                {item[0]}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        {customFields &&\r\n          customFields.map((item) => (\r\n            <div key={`metadata-custom-${item.name}`} className=\"metadata-input\">\r\n              <label className=\"metadata-label\" htmlFor=\"format\">\r\n                {item.label}:\r\n              </label>\r\n              <select\r\n                className=\"metadata-input__input\"\r\n                name={item.name}\r\n                id={item.name}\r\n                value={metadata[item.name] || \"\"}\r\n                onChange={handleChange}\r\n                required\r\n              >\r\n                <option value=\"\" disabled>\r\n                  Select...\r\n                </option>\r\n                {item.options.map((option, index) => (\r\n                  <option\r\n                    key={`${item.name}-${index}`}\r\n                    value={item.values[index]}\r\n                  >\r\n                    {option}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nMetadata.propTypes = {\r\n  metadata: PropTypes.object.isRequired,\r\n  handleChange: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Metadata;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useTable } from \"react-table\";\r\nimport types from \"../../db/types.json\";\r\n\r\nimport \"./TableSchema.css\";\r\n\r\nconst TableSchema = (props) => {\r\n  const [schema, setSchema] = useState(props.schema);\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  const data = React.useMemo(() => [...props.data], [schema]);\r\n\r\n  const columnsSchema = schema.fields.map((item, index) => {\r\n    return {\r\n      Header: item.name ? item.name : `column_${index + 1}`,\r\n      accessor: item.name ? item.name : `column_${index + 1}`,\r\n    };\r\n  });\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  const columns = React.useMemo(() => [...columnsSchema], [schema]);\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n  } = useTable({ columns, data });\r\n\r\n  const handleChange = (event, key, index) => {\r\n    const newSchema = { ...schema };\r\n    newSchema.fields[index][key] = event.target.value;\r\n    setSchema(newSchema);\r\n  };\r\n\r\n  //if the the user upload a new file, will update the state\r\n  //and render with the new values\r\n  useEffect(() => {\r\n    setSchema(props.schema);\r\n  }, [props.schema]);\r\n\r\n  const renderEditSchemaField = (key) => {\r\n    if (key === \"type\") {\r\n      return schema.fields.map((item, index) => (\r\n        <td key={`schema-type-field-${key}-${index}`}>\r\n          <select\r\n            className=\"table-tbody-select\"\r\n            value={item[key] || \"\"}\r\n            onChange={(event) => handleChange(event, key, index)}\r\n          >\r\n            {types.type.map((item, index) => {\r\n              return (\r\n                <option\r\n                  key={`schema-type-field-option-${item}-${index}`}\r\n                  value={item}\r\n                >\r\n                  {item}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </td>\r\n      ));\r\n    }\r\n    return schema.fields.map((item, index) => (\r\n      <td key={`schema-field-${key}-${index}`}>\r\n        <input\r\n          className=\"table-tbody-input\"\r\n          type=\"text\"\r\n          value={item[key]}\r\n          onChange={(event) => handleChange(event, key, index)}\r\n        />\r\n      </td>\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"table-container\">\r\n        <table className=\"table-schema-help\">\r\n          <tbody>\r\n            <tr className=\"table-tbody-help-tr\">\r\n              <td  className=\"table-tbody-help-td-empty\"></td>\r\n            </tr>\r\n            <tr className=\"table-tbody-help-tr\">\r\n              <td  className=\"table-tbody-help-td\">Title</td>\r\n            </tr>\r\n            <tr className=\"table-tbody-help-tr\">\r\n              <td  className=\"table-tbody-help-td\">Description</td>\r\n            </tr>\r\n            <tr className=\"table-tbody-help-tr\">\r\n              <td  className=\"table-tbody-help-td\">Type</td>\r\n            </tr>\r\n            <tr className=\"table-tbody-help-tr\">\r\n              <td  className=\"table-tbody-help-td\">Format</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <div className=\"table-schema-info_container\">\r\n          <table  className=\"table-schema-info_table\" {...getTableProps()}>\r\n            <thead>\r\n              {headerGroups.map((headerGroup) => (\r\n                <tr\r\n                  className=\"table-thead-tr\"\r\n                  {...headerGroup.getHeaderGroupProps()}\r\n                >\r\n                  {headerGroup.headers.map((column) => (\r\n                    <th className=\"table-thead-th\" {...column.getHeaderProps()}>\r\n                      {column.render(\"Header\")}\r\n                    </th>\r\n                  ))}\r\n                </tr>\r\n              ))}\r\n            </thead>\r\n            <tbody {...getTableBodyProps()}>\r\n              <tr className=\"table-tbody-tr-help\">\r\n                {renderEditSchemaField(\"title\")}\r\n              </tr>\r\n              <tr className=\"table-tbody-tr-help\">\r\n                {renderEditSchemaField(\"description\")}\r\n              </tr>\r\n              <tr>{renderEditSchemaField(\"type\")}</tr>\r\n              <tr>{renderEditSchemaField(\"format\")}</tr>\r\n              {rows.map((row) => {\r\n                prepareRow(row);\r\n                return (\r\n                  <tr {...row.getRowProps()}>\r\n                    {row.cells.map((cell) => {\r\n                      return (\r\n                        <td {...cell.getCellProps()} className=\"table-tbody-td\">\r\n                          {cell.render(\"Cell\")}\r\n                        </td>\r\n                      );\r\n                    })}\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nTableSchema.propTypes = {\r\n  schema: PropTypes.object.isRequired,\r\n  data: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default TableSchema;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./ProgressBar.css\";\r\n\r\nconst ProgressBar = (props) => {\r\n  const [offset, setOffset] = useState(0);\r\n  const circleRef = useRef(null);\r\n  const {\r\n    size,\r\n    progress,\r\n    strokeWidth,\r\n    circleOneStroke,\r\n    circleTwoStroke,\r\n    timeRemaining,\r\n  } = props;\r\n\r\n  const center = size / 2;\r\n  const radius = size / 2 - strokeWidth / 2;\r\n  const circumference = 2 * Math.PI * radius;\r\n\r\n  useEffect(() => {\r\n    const progressOffset = ((100 - progress) / 100) * circumference;\r\n    setOffset(progressOffset);\r\n\r\n    circleRef.current.style = \"transition: stroke-dashoffset 850ms ease-in-out\";\r\n  }, [setOffset, progress, circumference, offset]);\r\n\r\n  return (\r\n    <>\r\n      <svg className=\"svg\" width={size} height={size}>\r\n        <circle\r\n          className=\"svg-circle-bg\"\r\n          stroke={circleOneStroke}\r\n          cx={center}\r\n          cy={center}\r\n          r={radius}\r\n          strokeWidth={strokeWidth}\r\n        />\r\n        <circle\r\n          className=\"svg-circle\"\r\n          ref={circleRef}\r\n          stroke={circleTwoStroke}\r\n          cx={center}\r\n          cy={center}\r\n          r={radius}\r\n          strokeWidth={strokeWidth}\r\n          strokeDasharray={circumference}\r\n          strokeDashoffset={offset}\r\n        />\r\n        <text x={`${center}`} y={`${center + 2}`} className=\"svg-circle-text\">\r\n          {progress}%\r\n        </text>\r\n      </svg>\r\n      {timeRemaining > 0 &&  <span className=\"time-remaining\">{timeRemaining > 60 ? `${Math.floor(timeRemaining /60)} minute${Math.floor(timeRemaining /60) > 1 ? 's' : ''}` : `${Math.floor(timeRemaining)} second${timeRemaining > 1 ? 's' : ''}`} left</span>}\r\n    </>\r\n  );\r\n};\r\n\r\nProgressBar.propTypes = {\r\n  size: PropTypes.number.isRequired,\r\n  progress: PropTypes.number.isRequired,\r\n  strokeWidth: PropTypes.number.isRequired,\r\n  circleOneStroke: PropTypes.string.isRequired,\r\n  circleTwoStroke: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ProgressBar;\r\n","const getFileExtension = (filename) => {\r\n    return /[.]/.exec(filename) ? /[^.]+$/.exec(filename)[0] : undefined;\r\n  };\r\n\r\nconst  onFormatTitle = (name) => {\r\n    return name\r\n      .replace(/\\.[^/.]+$/, \"\")\r\n      .replace(/_/g, \" \")\r\n      .replace(/-/g, \" \");\r\n  };\r\n\r\nconst onFormatName = (name) => {\r\n    return name.replace(/\\.[^/.]+$/, \"\");\r\n  };\r\n\r\nconst onFormatBytes = (bytes, decimals = 1) => {\r\n    if (bytes === 0) return \"0 Bytes\";\r\n\r\n    const k = 1000;\r\n    const dm = decimals < 0 ? 0 : decimals;\r\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\r\n\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + \" \" + sizes[i];\r\n  };\r\n\r\nconst removeHyphen = (id) => {\r\n   return id.replace(/-/g, \"\");\r\n  };\r\n\r\nexport {\r\n    getFileExtension,\r\n    onFormatTitle,\r\n    onFormatName,\r\n    onFormatBytes,\r\n    removeHyphen,\r\n}","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport './InputFile.css'\r\nimport UploadIcon from \"../../assets/images/computing-cloud.svg\";\r\n\r\nconst InputFile = ({ onChangeHandler }) => {\r\n\r\n      return (\r\n            <div className=\"upload-area__drop\">\r\n                <input\r\n                    className=\"upload-area__drop__input\"\r\n                    type=\"file\"\r\n                    name=\"file\"\r\n                    onChange={onChangeHandler}\r\n                />\r\n                <img\r\n                    className=\"upload-area__drop__icon\"\r\n                    src=\"https://www.shareicon.net/data/256x256/2015/09/05/96087_cloud_512x512.png\"\r\n                    alt=\"upload-icon\"\r\n                />\r\n                <span className=\"upload-area__drop__text\">\r\n                    Drag and drop your files\r\n                    <br />\r\n                    or <br />\r\n                    click to select\r\n                </span>\r\n            </div>\r\n      )\r\n  }\r\n\r\nInputFile.propTypes = {\r\n  onChangeHandler: PropTypes.func.isRequired\r\n};\r\n\r\nexport default InputFile;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./InputUrl.css\";\r\n\r\nconst InputUrl = ({ onChangeUrl }) => {\r\n  const handleKeyPress = (event) => {\r\n    if (event.keyCode === 13) {\r\n      event.target.blur();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"upload-area__url\">\r\n      <label className=\"upload-area__url__label\" htmlFor=\"input-url\">\r\n        URL:\r\n      </label>\r\n      <input\r\n        className=\"upload-area__url__input\"\r\n        id=\"input-url\"\r\n        type=\"url\"\r\n        name=\"input-url\"\r\n        onBlur={onChangeUrl}\r\n        onKeyDown={(event) => handleKeyPress(event)}\r\n        placeholder=\"https://www.data.com/sample.csv\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nInputUrl.propTypes = {\r\n  onChangeUrl: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default InputUrl;\r\n","import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport InputFile from \"../InputFile\";\r\nimport InputUrl from \"../InputUrl\";\r\nimport './Choose.css'\r\n\r\nconst Choose = ({ onChangeUrl, onChangeHandler }) => {\r\n  const [uploadOption, setUploadOption] = useState(false);\r\n\r\n  return (\r\n    <div className=\"upload-choose\">\r\n      {uploadOption ? (\r\n        <>\r\n          {uploadOption === \"file\" && (\r\n            <InputFile onChangeHandler={onChangeHandler} />\r\n          )}\r\n          {uploadOption === \"url\" && <InputUrl onChangeUrl={onChangeUrl} />}\r\n        </>\r\n      ) : (\r\n        <div>\r\n          <button className=\"choose-btn\" onClick={() => setUploadOption(\"file\")}>Choose a file to Upload </button>\r\n          <p className=\"choose-text\">OR</p>\r\n          <button className=\"choose-btn\" onClick={() => setUploadOption(\"url\")}>Link a file already online</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nChoose.propTypes = {\r\n  onChangeUrl: PropTypes.func.isRequired,\r\n  onChangeHandler: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Choose;\r\n","import React from \"react\";\r\nimport * as data from \"frictionless.js\";\r\nimport toArray from \"stream-to-array\";\r\nimport ProgressBar from \"../ProgressBar\";\r\nimport { onFormatBytes } from \"../../utils\";\r\nimport Choose from \"../Choose\";\r\n\r\nclass Upload extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      datasetId: props.datasetId,\r\n      selectedFile: null,\r\n      selectedUrl: \"\",\r\n      fileSize: 0,\r\n      formattedSize: \"0 KB\",\r\n      start: \"\",\r\n      loaded: 0,\r\n      success: false,\r\n      error: false,\r\n      fileExists: false,\r\n      loading: false,\r\n      timeRemaining: 0,\r\n      uploadType: \"\", // \"file\" or \"url\"\r\n    };\r\n  }\r\n\r\n  onChangeHandler = async (event) => {\r\n    let { formattedSize, selectedFile } = this.state;\r\n\r\n    if (event.target.files.length > 0) {\r\n      selectedFile = event.target.files[0];\r\n      const file = data.open(selectedFile);\r\n      try {\r\n        await file.addSchema();\r\n      } catch (e) {\r\n        console.warn(e);\r\n      }\r\n      formattedSize = onFormatBytes(file.size);\r\n      const hash = await file.hash('sha256');\r\n      this.props.metadataHandler(Object.assign(file.descriptor, { hash }));\r\n    }\r\n\r\n    this.setState({\r\n      selectedFile,\r\n      selectedUrl: \"\",\r\n      loaded: 0,\r\n      success: false,\r\n      fileExists: false,\r\n      error: false,\r\n      formattedSize,\r\n      uploadType: \"file\",\r\n    });\r\n\r\n    await this.onClickHandler();\r\n  };\r\n\r\n  onChangeUrl = async (event) => {\r\n    const url = event.target.value.trim();\r\n    \r\n    if (!url) {\r\n      this.setState({\r\n        selectedUrl: \"\",\r\n        success: false,\r\n        error: false,\r\n        uploadType: \"\",\r\n      });\r\n      this.props.handleUploadStatus({\r\n        loading: false,\r\n        success: false,\r\n        error: false,\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      selectedUrl: url,\r\n      selectedFile: null,\r\n      loading: true,\r\n      success: false,\r\n      error: false,\r\n      uploadType: \"url\",\r\n    });\r\n\r\n    this.props.handleUploadStatus({\r\n      loading: true,\r\n      success: false,\r\n      error: false,\r\n    });\r\n\r\n    try {\r\n      // Validate URL and get resource metadata\r\n      const resource = await data.open(url);\r\n      await resource.addSchema();\r\n      \r\n      const formattedSize = onFormatBytes(resource.size);\r\n      const hash = await resource.hash('sha256');\r\n      \r\n      this.setState({\r\n        formattedSize,\r\n        fileSize: resource.size,\r\n        loading: false,\r\n        success: true,\r\n        error: false,\r\n      });\r\n\r\n      this.props.handleUploadStatus({\r\n        loading: false,\r\n        success: true,\r\n        error: false,\r\n      });\r\n\r\n      this.props.metadataHandler(Object.assign(resource.descriptor, { \r\n        hash,\r\n        url: url,\r\n        name: url.split('/').pop() || 'resource-from-url'\r\n      }));\r\n\r\n    } catch (error) {\r\n      console.error(\"URL processing failed:\", error);\r\n      this.setState({\r\n        loading: false,\r\n        success: false,\r\n        error: true,\r\n      });\r\n\r\n      this.props.handleUploadStatus({\r\n        loading: false,\r\n        success: false,\r\n        error: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  onUploadProgress = (progressEvent) => {\r\n    this.onTimeRemaining(progressEvent.loaded);\r\n    this.setState({\r\n      loaded: (progressEvent.loaded / progressEvent.total) * 100,\r\n    });\r\n  };\r\n\r\n  onTimeRemaining = (progressLoaded) => {\r\n    const end = new Date().getTime();\r\n    const duration = (end - this.state.start) / 1000;\r\n    const bps = progressLoaded / duration;\r\n    const kbps = bps / 1024;\r\n    const timeRemaining = (this.state.fileSize - progressLoaded) / kbps;\r\n\r\n    this.setState({\r\n      timeRemaining: timeRemaining / 1000,\r\n    });\r\n  };\r\n\r\n  onClickHandler = async () => {\r\n    const start = new Date().getTime();\r\n    const { selectedFile } = this.state;\r\n    const { client } = this.props;\r\n\r\n    const resource = data.open(selectedFile);\r\n\r\n    this.setState({\r\n      fileSize: resource.size,\r\n      start,\r\n      loading: true,\r\n    });\r\n\r\n    this.props.handleUploadStatus({\r\n      loading: true,\r\n      error: false,\r\n      success: false,\r\n    });\r\n\r\n    // Use client to upload file to the storage and track the progress\r\n    client\r\n      .pushBlob(resource, this.onUploadProgress)\r\n      .then((response) => {\r\n        this.setState({\r\n          success: true,\r\n          loading: false,\r\n          fileExists: ! response,\r\n          loaded: 100\r\n        });\r\n        this.props.handleUploadStatus({\r\n          loading: false,\r\n          success: true,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Upload failed with error: \" + error);\r\n        this.setState({ error: true, loading: false });\r\n        this.props.handleUploadStatus({\r\n          loading: false,\r\n          success: false,\r\n          error: true,\r\n        });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      success,\r\n      fileExists,\r\n      error,\r\n      timeRemaining,\r\n      selectedFile,\r\n      selectedUrl,\r\n      formattedSize,\r\n      uploadType,\r\n      loading,\r\n    } = this.state;\r\n\r\n    return (\r\n      <div className=\"upload-area\">\r\n        <Choose\r\n          onChangeHandler={this.onChangeHandler}\r\n          onChangeUrl={this.onChangeUrl}\r\n        />\r\n        <div className=\"upload-area__info\">\r\n          {(selectedFile || selectedUrl) && (\r\n            <>\r\n              <ul className=\"upload-list\">\r\n                <li className=\"list-item\">\r\n                  <div className=\"upload-list-item\">\r\n                    <div>\r\n                      <p className=\"upload-file-name\">\r\n                        {uploadType === \"file\" ? selectedFile.name : selectedUrl}\r\n                      </p>\r\n                      <p className=\"upload-file-size\">{formattedSize}</p>\r\n                    </div>\r\n                    <div>\r\n                      {uploadType === \"file\" && (\r\n                        <ProgressBar\r\n                          progress={Math.round(this.state.loaded)}\r\n                          size={50}\r\n                          strokeWidth={5}\r\n                          circleOneStroke=\"#d9edfe\"\r\n                          circleTwoStroke={\"#7ea9e1\"}\r\n                          timeRemaining={timeRemaining}\r\n                        />\r\n                      )}\r\n                      {uploadType === \"url\" && loading && (\r\n                        <div className=\"url-loading\">Processing URL...</div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n              <h2 className=\"upload-message\">\r\n                {success && !fileExists && !error && \r\n                  (uploadType === \"file\" ? \"File uploaded successfully\" : \"URL processed successfully\")}\r\n                {fileExists && \"File uploaded successfully\"}\r\n                {error && (uploadType === \"file\" ? \"Upload failed\" : \"URL processing failed\")}\r\n              </h2>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Upload;\r\n","import React from \"react\";\r\nimport { Client } from \"ckan-client\";\r\nimport PropTypes from \"prop-types\";\r\nimport frictionlessCkanMapper from \"frictionless-ckan-mapper-js\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nimport Metadata from \"./components/Metadata\";\r\nimport TableSchema from \"./components/TableSchema\";\r\nimport Upload from \"./components/Upload\";\r\nimport \"./App.css\";\r\nimport { removeHyphen } from \"./utils\";\r\n\r\nexport class ResourceEditor extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      datasetId: this.props.config.datasetId,\r\n      resourceId: \"\",\r\n      resource: this.props.resource || {},\r\n      ui: {\r\n        fileOrLink: \"\",\r\n        uploadComplete: undefined,\r\n        success: false,\r\n        error: false,\r\n        loading: false,\r\n      },\r\n      client: null,\r\n      isResourceEdit: false,\r\n    };\r\n    this.metadataHandler = this.metadataHandler.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { config } = this.props;\r\n    const {\r\n      authToken,\r\n      api,\r\n      lfs,\r\n      organizationId,\r\n      datasetId,\r\n      resourceId,\r\n    } = config;\r\n\r\n    const client = new Client(\r\n      `${authToken}`,\r\n      `${organizationId}`,\r\n      `${datasetId}`,\r\n      `${api}`,\r\n      `${lfs}`\r\n    );\r\n\r\n    //Check if the user is editing resource\r\n    if (resourceId) {\r\n      const resource = await client.action(\"resource_show\", { id: resourceId });\r\n      const resourceSchema = await client.action(\"resource_schema_show\", {\r\n        id: resourceId,\r\n      });\r\n      const resourceSample = await client.action(\"resource_sample_show\", {\r\n        id: resourceId,\r\n      });\r\n\r\n      let resourceCopy = resource.result;\r\n      let sampleCopy = [];\r\n\r\n      try {\r\n        // push the values to an array\r\n        for (const property in resourceSample.result) {\r\n          sampleCopy.push(resourceSample.result[property]);\r\n        }\r\n        // push sample as an array to be able to render in tableschema component\r\n        resourceCopy.sample = sampleCopy;\r\n        resourceCopy.schema = resourceSchema.result;\r\n      } catch (e) {\r\n        console.error(e);\r\n        //generate empty values not to break the tableschema component\r\n        resourceCopy.schema = { fields: [] };\r\n        resourceCopy.sample = [];\r\n      }\r\n\r\n      return this.setState({\r\n        client,\r\n        resourceId,\r\n        resource: resourceCopy,\r\n        isResourceEdit: true,\r\n      });\r\n    }\r\n\r\n    this.setState({ client });\r\n  }\r\n\r\n  metadataHandler(resource) {\r\n    this.setState({\r\n      resource,\r\n    });\r\n  }\r\n\r\n  handleChangeMetadata = (event) => {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n    let resourceCopy = this.state.resource;\r\n    resourceCopy[name] = value;\r\n\r\n    this.setState({\r\n      resource: resourceCopy,\r\n    });\r\n  };\r\n\r\n  handleSubmitMetadata = async () => {\r\n    const { resource, client } = this.state;\r\n\r\n    await this.createResource(resource);\r\n\r\n    // Change state of dataset to active if draft atm\r\n    // this relates to how CKAN v2 has a phased dataset creation. See e.g.\r\n    // https://github.com/ckan/ckan/blob/master/ckan/controllers/package.py#L917\r\n\r\n    // only need to do this test if in resource create mode if editing a\r\n    // resource this is unnecessary\r\n    // TODO: update this in future to check for edit mode\r\n    const isResourceCreate = true;\r\n    if (isResourceCreate) {\r\n      const datasetMetadata = await client.action(\"package_show\", {\r\n        id: this.state.datasetId,\r\n      });\r\n      let result = datasetMetadata.result;\r\n\r\n      if (result.state == \"draft\") {\r\n        result.state = \"active\";\r\n        await client.action(\"package_update\", result);\r\n      }\r\n    }\r\n\r\n    // Redirect to dataset page\r\n    return (window.location.href = `/dataset/${this.state.datasetId}`);\r\n  };\r\n\r\n  createResource = async (resource) => {\r\n    const { client } = this.state;\r\n    const { config } = this.props;\r\n    const { organizationId, datasetId, resourceId } = config;\r\n\r\n    const ckanResource = frictionlessCkanMapper.resourceFrictionlessToCkan(\r\n      resource\r\n    );\r\n\r\n    //create a valid format from sample\r\n    let data = { ...ckanResource.sample };\r\n    //delete sample because is an invalid format\r\n    delete ckanResource.sample;\r\n    //generate an unique id for bq_table_name property\r\n    let bqTableName = ckanResource.bq_table_name\r\n      ? ckanResource.bq_table_name\r\n      : uuidv4();\r\n\r\n    // Handle URL vs file upload differently\r\n    const isUrlResource = resource.url && !resource.hash; // URL resources might not have hash from upload\r\n    \r\n    let ckanResourceCopy = {\r\n      ...ckanResource,\r\n      package_id: this.state.datasetId,\r\n      name: resource.name || resource.title,\r\n      bq_table_name: removeHyphen(bqTableName),\r\n      sample: data,\r\n    };\r\n\r\n    if (isUrlResource) {\r\n      // For URL resources\r\n      ckanResourceCopy = {\r\n        ...ckanResourceCopy,\r\n        url: resource.url,\r\n        url_type: \"url\",\r\n      };\r\n    } else {\r\n      // For file uploads\r\n      ckanResourceCopy = {\r\n        ...ckanResourceCopy,\r\n        sha256: resource.hash,\r\n        size: resource.size,\r\n        lfs_prefix: `${organizationId}/${datasetId}`,\r\n        url: resource.name,\r\n        url_type: \"upload\",\r\n      };\r\n    }\r\n\r\n    //Check if the user is editing resource, call resource_update and redirect to the dataset page\r\n    if (resourceId) {\r\n      ckanResourceCopy = {\r\n        ...ckanResourceCopy,\r\n        id: resourceId,\r\n      };\r\n      await client.action(\"resource_update\", ckanResourceCopy);\r\n\r\n      return (window.location.href = `/dataset/${datasetId}`);\r\n    }\r\n    \r\n    await client\r\n      .action(\"resource_create\", ckanResourceCopy)\r\n      .then((response) => {\r\n        this.onChangeResourceId(response.result.id);\r\n      });\r\n  };\r\n\r\n  deleteResource = async () => {\r\n    const { resource, client, datasetId } = this.state;\r\n    if (window.confirm(\"Are you sure to delete this resource?\")) {\r\n      await client.action(\"resource_delete\", { id: resource.id });\r\n\r\n      return (window.location.href = `/dataset/${datasetId}`);\r\n    }\r\n  };\r\n\r\n  handleUploadStatus = (status) => {\r\n    const { ui } = this.state;\r\n    const newUiState = {\r\n      ...ui,\r\n      success: status.success,\r\n      error: status.error,\r\n      loading: status.loading,\r\n    };\r\n\r\n    this.setState({ ui: newUiState });\r\n  };\r\n\r\n  onChangeResourceId = (resourceId) => {\r\n    this.setState({ resourceId });\r\n  };\r\n\r\n  render() {\r\n    const { loading, success } = this.state.ui;\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <form\r\n          className=\"upload-wrapper\"\r\n          onSubmit={(event) => {\r\n            event.preventDefault();\r\n            if (this.state.isResourceEdit) {\r\n              return this.createResource(this.state.resource);\r\n            }\r\n            return this.handleSubmitMetadata();\r\n          }}\r\n        >\r\n          <div className=\"upload-header\">\r\n            <h2 className=\"upload-header__title\">Resource Editor</h2>\r\n          </div>\r\n\r\n          <Upload\r\n            client={this.state.client}\r\n            resource={this.state.resource}\r\n            metadataHandler={this.metadataHandler}\r\n            datasetId={this.state.datasetId}\r\n            handleUploadStatus={this.handleUploadStatus}\r\n            onChangeResourceId={this.onChangeResourceId}\r\n          />\r\n\r\n          <div className=\"upload-edit-area\">\r\n            <Metadata\r\n              metadata={this.state.resource}\r\n              handleChange={this.handleChangeMetadata}\r\n            />\r\n            {this.state.resource.schema && (\r\n              <TableSchema\r\n                schema={this.state.resource.schema}\r\n                data={this.state.resource.sample || []}\r\n              />\r\n            )}\r\n            {!this.state.isResourceEdit ? (\r\n              <button disabled={!success} className=\"btn\">\r\n                Save and Publish\r\n              </button>\r\n            ) : (\r\n              <div className=\"resource-edit-actions\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-delete\"\r\n                  onClick={this.deleteResource}\r\n                >\r\n                  Delete\r\n                </button>\r\n                <button className=\"btn\">Update</button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * If the parent component doesn't specify a `config` and scope prop, then\r\n * the default values will be used.\r\n * */\r\nResourceEditor.defaultProps = {\r\n  config: {\r\n    authToken: \"be270cae-1c77-4853-b8c1-30b6cf5e9878\",\r\n    api: \"http://localhost:5000\",\r\n    lfs: \"http://localhost:5001\", // Feel free to modify this\r\n    organizationId: \"myorg\",\r\n    datasetId: \"data-test-2\",\r\n  },\r\n};\r\n\r\nResourceEditor.propTypes = {\r\n  config: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default ResourceEditor;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\n// Mount the ResourceEditor app explicitly\r\n// (make sure you call the function after it's loaded)\r\nfunction mountResourceEditorApp([elementId, config, resource] = ['root', {\r\n  authToken: null,\r\n  api: null,\r\n  lfs: null,\r\n  organizationId: null,\r\n  datasetId: null,\r\n  resourceId: null,\r\n}, {}]) {\r\n  ReactDOM.render(\r\n    <React.StrictMode>\r\n      <App config={config} resource={resource} />\r\n    </React.StrictMode>,\r\n    document.getElementById(elementId)\r\n  );\r\n};\r\n\r\n\r\n// Automatically mount the app if an element with id='ResourceEditor' exists\r\nconst element = document.getElementById('ResourceEditor');\r\nif (element) {\r\n  const config = {\r\n    datasetId: element.getAttribute('data-dataset-id'),\r\n    api: element.getAttribute('data-api'),\r\n    lfs: element.getAttribute('data-lfs'),\r\n    authToken: element.getAttribute('data-auth-token'),\r\n    organizationId: element.getAttribute('data-organization-id'),\r\n    resourceId: element.getAttribute('data-resource-id')\r\n  }\r\n\r\n  ReactDOM.render(\r\n    <React.StrictMode>\r\n        <App\r\n          config={config}\r\n          resource={ element.getAttribute('data-resource')}\r\n        />\r\n    </React.StrictMode>,\r\n    element\r\n  );\r\n}\r\n\r\n\r\nexport { ResourceEditor } from './App';\r\n"],"sourceRoot":""}